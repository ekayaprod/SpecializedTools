<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Toolkit</title>
    <!-- Preload bookmarklet scripts to improve perceived load time -->
    <link rel="preload" href="bookmarklets/target-edit.js" as="fetch" crossorigin>
    <link rel="preload" href="bookmarklets/property-clipper.js" as="fetch" crossorigin>
    <link rel="preload" href="bookmarklets/passphrase-generator.js" as="fetch" crossorigin>
    <link rel="preload" href="bookmarklets/temp-password.js" as="fetch" crossorigin>
    <link rel="preload" href="bookmarklets/pa-county-finder.js" as="fetch" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .bookmarklet-btn { cursor: move; }
        .loading { opacity: 0.5; pointer-events: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 p-8">
    <div class="max-w-4xl mx-auto">
        <header class="mb-10 border-b border-slate-200 pb-6">
            <h1 class="text-3xl font-bold text-slate-900">Browser Toolkit</h1>
            <p class="text-slate-600 mt-2">A collection of self-contained utility bookmarklets.</p>
        </header>

        <main class="space-y-6">
            <!-- TARGET & EDIT -->
            <section class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h2 class="text-xl font-semibold text-slate-900">Target & Edit</h2>
                    <p class="text-sm text-slate-600 mt-2">Visually select any element, edit it, and download as HTML.</p>
                </div>
                <div class="w-full md:w-64 text-center">
                    <a id="btn-target-edit" href="#" onclick="return false;" class="bookmarklet-btn block w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-blue-700">Loading...</a>
                    <p class="text-xs text-slate-400 mt-2">Drag to Bookmarks Bar</p>
                </div>
            </section>

            <!-- PROPERTY CLIPPER -->
            <section class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h2 class="text-xl font-semibold text-slate-900">Property Clipper</h2>
                    <p class="text-sm text-slate-600 mt-2">
                        Research Accelerator for Realtor.com, Zillow, Redfin, etc.
                        Extracts clean listing data and generates "Deep Research" prompts for Gemini.
                    </p>
                    <div class="mt-3 text-xs bg-slate-100 p-2 rounded text-slate-500">
                        <strong>Workflow:</strong> Click Bookmarklet &rarr; Copy Prompt &rarr; Download File &rarr; Upload to Gemini.
                    </div>
                </div>
                <div class="w-full md:w-64 text-center">
                    <a id="btn-prop-clipper" href="#" onclick="return false;" class="bookmarklet-btn block w-full bg-indigo-600 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-indigo-700">Loading...</a>
                    <p class="text-xs text-slate-400 mt-2">Drag to Bookmarks Bar</p>
                </div>
            </section>

            <!-- PASSPHRASE GENERATOR -->
            <section class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h2 class="text-xl font-semibold text-slate-900">Passphrase Generator</h2>
                    <p class="text-sm text-slate-600 mt-2">Generates cryptographically strong, memorable phrases (e.g., "BraveGoldenEagle"). Uses seasonal themes.</p>
                </div>
                <div class="w-full md:w-64 text-center">
                    <a id="btn-passphrase" href="#" onclick="return false;" class="bookmarklet-btn block w-full bg-slate-600 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-slate-700">Loading...</a>
                </div>
            </section>

            <!-- TEMP PASSWORD -->
            <section class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h2 class="text-xl font-semibold text-slate-900">Temp Password</h2>
                    <p class="text-sm text-slate-600 mt-2">Creates simple temporary passwords (e.g., "Applebutter1!").</p>
                </div>
                <div class="w-full md:w-64 text-center">
                    <a id="btn-temp-pass" href="#" onclick="return false;" class="bookmarklet-btn block w-full bg-slate-600 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-slate-700">Loading...</a>
                </div>
            </section>

            <!-- PA COUNTY FINDER -->
            <section class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h2 class="text-xl font-semibold text-slate-900">PA County Finder</h2>
                    <p class="text-sm text-slate-600 mt-2">Look up PA county info by highlighted text or prompt.</p>
                </div>
                <div class="w-full md:w-64 text-center">
                    <a id="btn-pa-county" href="#" onclick="return false;" class="bookmarklet-btn block w-full bg-slate-600 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-slate-700">Loading...</a>
                </div>
            </section>
        </main>

        <footer class="mt-12 text-center text-xs text-slate-400">
            <p>Hosted on GitHub Pages</p>
        </footer>
    </div>

    <script>
        async function load(id, file, name) {
            const el = document.getElementById(id);
            try {
                const res = await fetch(file);
                if (!res.ok) throw new Error('Failed');
                let code = await res.text();

                // --- SAFE BOOKMARKLET COMPILATION ---
                // 1. Remove Block Comments (Strictly avoid // comments in source files)
                code = code.replace(/\/\*[\s\S]*?\*\//g, '');

                // 2. Trim lines but PRESERVE NEWLINES.
                // This is critical for template literals (like LLM Prompts) to maintain formatting.
                code = code.split('\n').map(line => line.trim()).filter(l => l.length > 0).join('\n');

                // 3. Encode URI (Handles the newlines via %0A)
                el.href = `javascript:${encodeURIComponent(code)}`;
                el.textContent = name;
            } catch (e) {
                console.error(e);
                el.textContent = "Error";
                el.classList.add("bg-red-500");
            }
        }

        // Execute immediately since script is at end of body
        load('btn-target-edit', 'bookmarklets/target-edit.js', 'Target & Edit');
        load('btn-prop-clipper', 'bookmarklets/property-clipper.js', 'Property Clipper');
        load('btn-passphrase', 'bookmarklets/passphrase-generator.js', 'Passphrase Gen');
        load('btn-temp-pass', 'bookmarklets/temp-password.js', 'Temp Password');
        load('btn-pa-county', 'bookmarklets/pa-county-finder.js', 'PA County');
    </script>
</body>
</html>
